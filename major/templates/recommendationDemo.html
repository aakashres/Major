{% extends 'layouts/base.html' %}
{% load staticfiles %}
{% block extra_style %}
.rating {
    overflow: hidden;
    display: inline-block;
    font-size: 0;
    position: relative;
}
.rating-input {
    float: right;
    width: 16px;
    height: 16px;
    padding: 0;
    margin: 0 0 0 -16px;
    opacity: 0;
}
.rating:hover .rating-star:hover,
.rating:hover .rating-star:hover ~ .rating-star,
.rating-input:checked ~ .rating-star {
    background-position: 0 0px;
}
.rating-star,
.rating:hover .rating-star {
    position: relative;
    float: right;
    display: block;
    width: 16px;
    height: 16px;
    background: url('{% static 'star.png' %}') 0 -16px;
}
{% endblock %}
{% block extra_head %}
<link href="{% static 'assets/pages/css/blog.min.css' %}" rel="stylesheet" type="text/css" />
<style type="text/css">
  .grid-item { width: 25% }
</style>
{% endblock %}
{% block page_title %}
{% endblock %}
{% block content %}


<div class="portlet box blue">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-gift"></i>Recommendation System Demo </div>
    </div>
    <div class="portlet-body form">
        <!-- BEGIN FORM-->
        <form action="" method="post">
        {% csrf_token %}
          <div class="row" style="padding:20px;">
            <div class="col-md-6">
            Toy Story (1995)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="a-1-5" name="a-1">
                <label for="a-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="a-1-4" name="a-1">
                <label for="a-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="a-1-3" name="a-1">
                <label for="a-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="a-1-2" name="a-1">
                <label for="a-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="a-1-1" name="a-1">
                <label for="a-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Twelve Monkeys (1995)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="b-1-5" name="b-1">
                <label for="b-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="b-1-4" name="b-1">
                <label for="b-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="b-1-3" name="b-1">
                <label for="b-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="b-1-2" name="b-1">
                <label for="b-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="b-1-1" name="b-1">
                <label for="b-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Usual Suspects, The (1995)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="c-1-5" name="c-1">
                <label for="c-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="c-1-4" name="c-1">
                <label for="c-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="c-1-3" name="c-1">
                <label for="c-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="c-1-2" name="c-1">
                <label for="c-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="c-1-1" name="c-1">
                <label for="c-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Outbreak (1995)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="d-1-5" name="d-1">
                <label for="d-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="d-1-4" name="d-1">
                <label for="d-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="d-1-3" name="d-1">
                <label for="d-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="d-1-2" name="d-1">
                <label for="d-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="d-1-1" name="d-1">
                <label for="d-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Shawshank Redemption, The (1994)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="e-1-5" name="e-1">
                <label for="e-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="e-1-4" name="e-1">
                <label for="e-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="e-1-3" name="e-1">
                <label for="e-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="e-1-2" name="e-1">
                <label for="e-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="e-1-1" name="e-1">
                <label for="e-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            While You Were Sleeping (1995)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="f-1-5" name="f-1">
                <label for="f-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="f-1-4" name="f-1">
                <label for="f-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="f-1-3" name="f-1">
                <label for="f-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="f-1-2" name="f-1">
                <label for="f-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="f-1-1" name="f-1">
                <label for="f-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Forrest Gump (1994)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="g-1-5" name="g-1">
                <label for="g-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="g-1-4" name="g-1">
                <label for="g-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="g-1-3" name="g-1">
                <label for="g-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="g-1-2" name="g-1">
                <label for="g-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="g-1-1" name="g-1">
                <label for="g-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Silence of the Lambs, The (1991)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="h-1-5" name="h-1">
                <label for="h-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="h-1-4" name="h-1">
                <label for="h-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="h-1-3" name="h-1">
                <label for="h-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="h-1-2" name="h-1">
                <label for="h-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="h-1-1" name="h-1">
                <label for="h-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Alien (1979)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="i-1-5" name="i-1">
                <label for="i-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="i-1-4" name="i-1">
                <label for="i-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="i-1-3" name="i-1">
                <label for="i-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="i-1-2" name="i-1">
                <label for="i-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="i-1-1" name="i-1">
                <label for="i-1-1" class="rating-star"></label>
            </span>
            </div>
            <div class="col-md-6">
            Die Hard 2 (1990)
            </div>
            <div class="col-md-6">
            <span class="rating">
                <input type="radio" class="rating-input" value="5"
                       id="j-1-5" name="j-1">
                <label for="j-1-5" class="rating-star"></label>
                <input type="radio" class="rating-input" value="4"
                       id="j-1-4" name="j-1">
                <label for="j-1-4" class="rating-star"></label>
                <input type="radio" class="rating-input" value="3"
                       id="j-1-3" name="j-1">
                <label for="j-1-3" class="rating-star"></label>
                <input type="radio" class="rating-input" value="2"
                       id="j-1-2" name="j-1">
                <label for="j-1-2" class="rating-star"></label>
                <input type="radio" class="rating-input" value="1"
                       id="j-1-1" name="j-1">
                <label for="j-1-1" class="rating-star"></label>
            </span>
            </div>
            </div>
            <div class="form-actions">
                <div class="btn-set pull-right">
                    <button type="submit" class="btn green">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>

{%for original in originals%}
  <li>{{original}}</li>
{% endfor %}
{% if predictions %}
<h1>Recommended Movies</h1>
<div class=" blog-content-1 grid" data-masonry='{ "itemSelector": ".grid-item"}'>
    <div class="container">
        {% for movie in predictions %}
            <div class="grid-item" style="padding:15px;">
                <div class="blog-post-sm bordered blog-container">
                    <div class="blog-img-thumb">
                        <a href="{% url 'movie:movieDetail' movie.slug %}">
                            <img src="{{movie.photo.url}}" />
                        </a>
                    </div>
                    <div class="blog-post-content">
                        <h2 class="blog-title blog-post-title">
                            <a href="{% url 'movie:movieDetail' movie.slug %}">{{movie.title}}</a>
                        </h2>
                        <div class="blog-post-meta">
                                <i class="icon-tag font-blue"></i>
                                {% for movie in movie.genre.all %}<a href="/movie/list/?q={{movie}}">{{movie}}</a>, {% endfor %}
                            </div>
                        <span class="movie-stars" data-rating="{{movie.rating}}" data-num-stars="5" ></span>
                        <p class="blog-post-desc">
                            {% with description=movie.description|safe %}
                            {{description|truncatewords:"5"}}
                            {% endwith %}
                        </p>
                        <div class="blog-post-foot">
                            <div class="blog-post-meta">
                                <i class="icon-calendar font-blue"></i>
                                <a href="javascript:;">{{movie.released_date}}</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
{% block extra_js%}
<script>
    $.fn.stars = function() {
        return $(this).each(function() {
            var rating = $(this).data("rating");
            if ((rating%1) == 0){
                rating = Math.floor(rating)
            }

            var numStars = $(this).data("numStars");
            var fullStar = new Array(Math.floor(rating + 1)).join('<i class="fa fa-star"></i>');
            var halfStar = ((rating%1) !== 0) ? '<i class="fa fa-star-half-empty"></i>': '';
            var noStar = new Array(Math.floor(numStars + 1 - rating)).join('<i class="fa fa-star-o"></i>');
            $(this).html(fullStar + halfStar + noStar);

        });
    }

    $('.movie-stars').stars()
</script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
{% endblock %}
